
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rifa CR4 - 1M Semanal</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
    <!-- LibrerÃ­a de Confetti para efecto WOW -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.4.0/dist/confetti.browser.min.js"></script>

    <!-- 
        ========================================================================
        1. CONFIGURACIÃ“N CRÃTICA DE FIREBASE (Realtime Database)
        ======================================================================== 
        Estas lÃ­neas cargan el SDK y lo inicializan con tu configuraciÃ³n.
        NOTA: Usamos el CDN de Firebase para Realtime Database (database.js)
    -->
    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-database.js"></script>
    <script>
        // ESTA ES LA CONFIGURACIÃ“N QUE ME PROPORCIONASTE
        const firebaseConfig = {
            apiKey: "AIzaSyBshc3BQDbSa1ZALyTo8dlSIOWlK9el1fw",
            authDomain: "rifacr4-rtrifacr4-rt.firebaseapp.com",
            databaseURL: "https://rifacr4-rtrifacr4-rt-default-rtdb.firebaseio.com", // AsegÃºrate que esta URL sea correcta si no la proporcionaste
            projectId: "rifacr4-rtrifacr4-rt",
            storageBucket: "rifacr4-rtrifacr4-rt.firebasestorage.app",
            messagingSenderId: "236053694074",
            appId: "1:236053694074:web:76aa18fe73b51bb4ea1dc3",
            measurementId: "G-VZRXGRDRYJ"
        };
        
        // Inicializar Firebase y obtener la referencia a la base de datos
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();
    </script>
    <script>
        document.addEventListener("mousemove",e=>{
            document.body.style.setProperty('--x', e.clientX+'px');
            document.body.style.setProperty('--y', e.clientY+'px');
    }   );
</script>

</head>
<body>

    <div id="tooltip-reserva" class="tooltip-reserva hidden"></div>

    <!-- PANTALLA DE CARGA (SPLASH SCREEN) -->
    <div id="splash-screen" class="splash-screen">
        <div class="intro-content">
            <i class="fas fa-motorcycle intro-icon pulse"></i>
            <h1 class="neon-glow-red">Gran Rifa</h1>
            <p>Cargando boletas...</p>
            <p>(Por favor espere)</p>
        </div>
    </div>

    <!-- CONTENIDO PRINCIPAL DE LA APLICACIÃ“N -->
    <main id="app-content" class="hidden">
        
        <!-- HEADER Y NAVEGACIÃ“N -->
        <header class="main-header">
            <nav class="nav-bar glass-box">
                <span class="logo-text">Rifa CR4 - 1 Millon Semanal</span>
                <div class="nav-buttons">
                    <button id="btn-admin" class="btn-nav"><i class="fas fa-user-lock"></i> Admin</button>
                    <button id="btn-ganadores" class="btn-nav"><i class="fas fa-trophy"></i> Historial</button>
                </div>
            </nav>
        </header>

<section class="glass-box" style="margin-top:18px; text-align:center;">
    <h2 style="margin-bottom:6px;">Â¿CÃ³mo funciona la pÃ¡gina? ğŸï¸ğŸŸï¸</h2>
    <p style="font-size:0.95rem; line-height:1.5; color:var(--muted);">
        Elige tus nÃºmeros disponibles del <b>000 al 999</b> y resÃ©rvalos con un solo clic. 
        Completa tus datos y confirma la reserva por WhatsApp. 
        Una vez el pago sea verificado, tu boleta quedarÃ¡ <b>marcada como PAGADA</b> y 
        participarÃ¡s automÃ¡ticamente en los sorteos semanales y el sorteo final de la moto.  
        <br><br>
        <b>Colores:</b> ğŸŸ© Libre â€“ ğŸŸ¨ Reservado â€“ ğŸ”´ Pagado
    </p>
</section>


        <!-- BANNER E INFORMACIÃ“N PRINCIPAL -->
        <section class="hero-banner fade-in">
            <img src="Rifa.jpg" alt="Imagen de la Moto Honda CR4 de la Rifa" class="banner-img">
            <div class="game-details glass-box slide-up">
                <h2>Â¡Que oferton ğŸ‘Œ!</h2>
                <p class="price neon-glow-green">$25.000 / Boleta</p>
                <p>Fecha Sorteo Final: <span class="highlight-text">30/01/2026</span></p>
            </div>
        </section>

        <!-- CONTADORES Y ESTADÃSTICAS -->
        <section class="dashboard-stats glass-box slide-up" style="animation-delay: 1.8s;">
            <h3>Tiempo Restante</h3>
            <div class="timers-grid">
                <div class="">
                    <p>Sorteo Final</p>
                    <div id="timer-final" class="countdown-timer neon-glow-red"></div>
                </div>
                <div class="timer-box">
                    <p>PrÃ³ximo Semanal</p>
                    <div id="timer-semanal" class="countdown-timer neon-glow-green"></div>
                </div>
            </div>

            <h3 style="margin-top: 20px;">Rifas completas</h3>
            <div class="stats-grid">
                <div class="stat-item libre">
                    <p id="stat-libre">0</p>
                    <span>Libres</span>
                </div>
                <div class="stat-item reservado">
                    <p id="stat-reservado">0</p>
                    <span>Reservadas</span>
                </div>
                <div class="stat-item pagado">
                    <p id="stat-pagado">0</p>
                    <span>Pagadas</span>
                </div>
                <div class="stat-item total">
                    <p>1000</p>
                    <span>Total</span>
                </div>
            </div>
        </section>

        <!-- SELECTOR DE BOLETAS -->
        <section class="boletas-selection-section slide-up" style="animation-delay: 2.1s;">
            <div class="glass-box">
                <h3>Selecciona tus NÃºmeros (000/999)ğŸ‘</h3>
                <p class="leyenda-container">
                    <span class="badge disponible"><i class="fas fa-circle"></i> Libre</span>
                    <span class="badge reservado"><i class="fas fa-circle"></i> Reservado</span>
                    <span class="badge pagado"><i class="fas fa-circle"></i> Pagado</span>
                </p>

                <div class="search-filter-bar">
                    <input type="text" id="search-number" placeholder="Buscar nÃºmero (ej: 123)">
                    <select id="filter-status">
                        <option value="todos">Mostrar Todos</option>
                        <option value="libre">Disponibles</option>
                        <option value="reservado">Reservados</option>
                        <option value="pagado">Pagados</option>
                    </select>
                </div>
                
                <div id="grid-boletas" class="grid-container">
                    <!-- Las boletas se generan aquÃ­ por script.js -->
                </div>
            </div>
        </section>

        <!-- REGLAS Y PREGUNTAS FRECUENTES -->
        <section class="rules-faq-section slide-up" style="animation-delay: 2.4s;">
            <h2>Reglas y Premios</h2>
            <div class="glass-box">
                <details>
    <summary>ğŸ“… Â¿CuÃ¡ndo es el sorteo final?</summary>
    <p>El sorteo final serÃ¡ el **[FECHA]** con transmisiÃ³n en vivo. Todos los nÃºmeros entran automÃ¡ticamente. ğŸ”¥</p>
</details>

<details>
    <summary>ğŸ“Œ Â¿Necesito estar presente para ganar?</summary>
    <p>No es necesario. Si ganas te contactamos de inmediato para entregar el premio. ğŸ†</p>
</details>

<details>
    <summary>ğŸ§¾ Â¿Entregan comprobante?</summary>
    <p>SÃ­, cada reserva genera un registro digital en el sistema, y los pagos quedan registrados. Todo transparente. âœ”</p>
</details>

<details>
    <summary>ğŸ« Â¿Puedo comprar varias boletas?</summary>
    <p>Â¡Claro! Entre mÃ¡s nÃºmeros tengas, mÃ¡s probabilidades. Puede seleccionar 1, 3, 5 o todas las que quieras. ğŸ˜</p>
</details>

<details>
    <summary>ğŸŸ¢ Â¿QuÃ© significan los colores de los nÃºmeros?</summary>
    <p>
        ğŸŸ¢ <b>Libre:</b> Disponible para comprar<br>
        ğŸŸ¡ <b>Reservado:</b> Alguien lo solicitÃ³, pero aÃºn no pagÃ³<br>
        ğŸ”´ <b>Pagado:</b> NÃºmero asegurado para el sorteo
    </p>
</details>

<details>
    <summary>ğŸšš Â¿CÃ³mo entregan la moto si gano?</summary>
    <p>Coordinamos entrega en persona con documentos y papeles al dÃ­a. El ganador se lleva la moto legal y asegurada. ğŸğŸ’¨</p>
</details>

<details>
    <summary>â­ Â¿Es confiable y verificable?</summary>
    <p>Todo el sistema registra automÃ¡ticamente compras, reservas y pagos. TambiÃ©n podrÃ¡s ver ganadores anteriores. Transparencia 100%. ğŸ”</p>
</details>

            </div>
        </section>

        <!-- PIE DE PÃGINA -->
        <footer>
            <p>&copy; Rifa CR4. Creditos: Hero.</p>
        </footer>
    </main>

    <!-- FOOTER STICKY PARA COMPRA -->
    <div id="sticky-form-buy" class="sticky-footer hidden">
        <div class="buy-panel">
            <div class="total-info">
                <span class="total-text">Total a Pagar <span id="num-seleccionados-count"></span>:</span>
                <span id="total-price" class="neon-glow-red"></span>
            </div>
            <button id="btn-participar-main" class="btn-confirm pulse"><i class="fab fa-whatsapp"></i> Participar Ahora</button>
        </div>
    </div>

    <!-- MODAL 1: CONFIRMACIÃ“N DEL CLIENTE (Formulario de Reserva) -->
    <div id="modal-cliente-confirm" class="modal hidden">
        <div class="modal-content glass-box">
            <button class="btn-close" onclick="toggleModal('modal-cliente-confirm', false);">&times;</button>
            <h2 class="neon-glow-green">Confirma tu Reserva</h2>
            <p>EstÃ¡s a punto de reservar los nÃºmeros: <strong id="client-modal-numbers" class="highlight-text"></strong></p>
            <p class="small-text">Diligencia tus datos para que podamos contactarte y confirmar tu pago. Tu reserva dura 2 horas.</p>

            <form id="client-confirm-form">
                <label for="client-name">Nombre Completo:</label>
                <input type="text" id="client-name" required placeholder="(Completo, obligatorio)">

                <label for="client-phone">TelÃ©fono de Contacto (WhatsApp):</label>
                <input type="tel" id="client-phone" required placeholder="Ej: 3219876543">

                <button type="submit" class="btn-confirm-whatsapp"><i class="fab fa-whatsapp"></i> RESERVAR Y ENVIAR WHATSAPP</button>
            </form>
        </div>
    </div>

    <!-- MODAL 2: PANEL DE ADMINISTRACIÃ“N -->
    <div id="modal-admin-panel" class="modal hidden">
        <div class="modal-content glass-box admin-size">
            <button class="btn-close" onclick="toggleModal('modal-admin-panel', false);">&times;</button>
            <h2 class="neon-glow-red">Panel de Admin</h2>
            <p>GestiÃ³n de boletas.ğŸ˜</p>

            <div class="admin-actions-grid">
                <button id="btn-assign-manual" class="btn-admin-action"><i class="fas fa-edit"></i> Asignar Manual</button>
                <button id="btn-manage-sorteos" class="btn-admin-action"><i class="fas fa-trophy"></i> Registrar Ganador</button>
                <button id="btn-download-data" class="btn-admin-action"><i class="fas fa-download"></i> Exportar CSV</button>
                <button id="btn-reset-data" class="btn-admin-action btn-danger"><i class="fas fa-eraser"></i> RESET TOTAL</button>
            </div>

            <h3>Boletas Reservadas (<span id="count-reservadas">0</span>)</h3>
            <div class="admin-data-summary glass-box">
                <table id="table-reservadas" class="admin-table">
                    <!-- Contenido generado por admin.js -->
                </table>
            </div>

            <h3>Boletas Pagadas (<span id="count-pagadas">0</span>)</h3>
            <div class="admin-data-summary glass-box">
                <table id="table-pagadas" class="admin-table">
                    <!-- Contenido generado por admin.js -->
                </table>
            </div>
        </div>
    </div>
    
    <!-- MODAL 3: ASIGNACIÃ“N MANUAL -->
    <div id="modal-assign-manual" class="modal hidden">
        <div class="modal-content glass-box">
            <button class="btn-close" onclick="toggleModal('modal-assign-manual', false); toggleModal('modal-admin-panel', true);">&times;</button>
            <h2 class="neon-glow-green">AsignaciÃ³n Directa</h2>
            <p>Asigna una boleta de forma rÃ¡pida, sin pasar por WhatsApp.</p>
            <form id="form-assign-manual">
                <label for="manual-num">NÃºmero de Boleta (000-999):</label>
                <input type="number" id="manual-num" min="0" max="999" required placeholder="Ej: 045">

                <label for="manual-name">Nombre del Cliente:</label>
                <input type="text" id="manual-name" required placeholder="Ej: Pedro Gonzales">

                <label for="manual-phone">TelÃ©fono:</label>
                <input type="tel" id="manual-phone" required placeholder="Ej: 3001234567">
                
                <div class="admin-actions-grid" style="grid-template-columns: 1fr 1fr; margin-top: 15px;">
                    <button type="button" class="btn-confirm btn-pagar-manual">Marcar como PAGADO</button>
                    <button type="button" class="btn-admin-action btn-reservar-manual">Marcar como RESERVADO</button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- MODAL 4: REGISTRO DE GANADORES -->
    <div id="modal-register-winner" class="modal hidden">
        <div class="modal-content glass-box">
            <button class="btn-close" onclick="toggleModal('modal-register-winner', false); toggleModal('modal-admin-panel', true);">&times;</button>
            <h2 class="neon-glow-red">Registro de Sorteo</h2>
            <p>Registra el resultado de un sorteo semanal o final.</p>
            <form id="form-register-winner">
                <label for="winner-date">Fecha del Sorteo:</label>
                <input type="date" id="winner-date" required value="2025-12-02">

                <label for="winner-lottery">LoterÃ­a / Sorteo:</label>
                <input type="text" id="winner-lottery" required placeholder="Ej: LoterÃ­a de MedellÃ­n">
                
                <label for="winner-number">NÃºmero Ganador (000-999):</label>
                <input type="number" id="winner-number" min="0" max="999" required placeholder="Ej: 456">
                
                <button type="submit" class="btn-confirm-whatsapp"><i class="fas fa-crown"></i> REGISTRAR GANADOR</button>
            </form>
        </div>
    </div>

    <!-- MODAL 5: HISTORIAL DE GANADORES -->
    <div id="modal-sorteo-history" class="modal hidden">
        <div class="modal-content glass-box admin-size">
            <button class="btn-close" onclick="toggleModal('modal-sorteo-history', false);">&times;</button>
            <h2 class="neon-glow-green">Historial de Sorteos</h2>
            <p>Ganadores anteriores registrados.</p>
            
            <div class="admin-data-summary glass-box" style="max-height: 500px;">
                <table id="table-winner-history" class="admin-table">
                    <thead>
                        <tr>
                            <th>Fecha</th>
                            <th>LoterÃ­a</th>
                            <th>NÃºmero</th>
                            <th>Estado Cliente</th>
                        </tr>
                    </thead>
                    <tbody id="table-winner-history-body">
                        <!-- Historial generado por admin.js -->
                        <tr><td colspan="4">Cargando historial...</td></tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <section id="video-promo-container">
        <video width="1920" height="1014" controls autoplay muted loop playsinline class="responsive-video">
            <source src="edit.mp4" type="video/mp4">
            Tu navegador no soporta la etiqueta de video.
        </video>
    </section>
    
    <footer class="main-footer">

    <footer class="epic-footer">
        <div class="footer-content glass-box">
            <div class="footer-section">
                <h3 class="neon-glow-green">Rifa CR4 ğŸ†</h3>
                <p>Â¡Participa por la Moto y Gana 1M Semanal!</p>
                <p class="small">Lleva tu suerte al siguiente nivel.</p>
            </div>
            
            <div class="footer-section contact-info">
                <h3>Contacto Directo del Desarrollador</h3>
                <p><i class="fas fa-user"></i> Daniel Camilo Rey FlÃ³rez</p>
                <p><i class="fab fa-whatsapp"></i> <a href="https://wa.me/573227086610" target="_blank">322 708 6610</a></p>
                <p><i class="fas fa-envelope"></i>danielcamilo.14@outlook.com</p>
            </div>
            
            <div class="footer-section">
                <h3>Legal & CrÃ©ditos</h3>
                <p class="credit-text small">
                    DiseÃ±o y Desarrollo de Plataforma: <span class="highlight-text">Daniel Camilo Rey FlÃ³rez</span>
                </p>
                <p class="credit-text small">
                    Â© 2025 | Todos los derechos reservados.
                </p>
                <p class="credit-text small version">
                    Creo paginas economicas.
                </p>
            </div>
        </div>
    </footer>
    
    <a href="https://wa.me/573227086610?text=Hola%2C%20tÃº%20eres%20en%20el%20desarrollador%20de%20la%20pÃ¡gina%20Gran%20Rifa-%20CR4.%20" 
       id="floating-whatsapp-btn" target="_blank" class="pulse-whatsapp">
        <i class="fab fa-whatsapp"></i>
    </a>


    <!-- 2. ENLACE A SCRIPTS DE LÃ“GICA -->
    <script src="script.js"></script>
    <script src="admin.js"></script>
</body>
</html>
